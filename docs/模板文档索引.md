# 模板文档索引

本文档汇总了 Mihomo-Mosdns 同步系统中所有模块的模板文档，每个模块都有详细的功能介绍、工作流程和输入输出参数说明。

## 模块列表

1. [RuleGenerationOrchestrator（规则生成协调器）](RuleGenerationOrchestrator模板文档.md)
   - 功能：两阶段生成架构的第一阶段，生成结构化的中间文件
   - 主要方法：run, _prepare_workspace, _process_rules, _write_intermediate_files

2. [RuleConverter（规则转换器）](RuleConverter模板文档.md)
   - 功能：已重构为无状态的纯工具类，提供逻辑转换功能
   - 主要方法：convert_single_rule, fetch_and_parse_ruleset, _determine_content_type, _convert_format

3. [RuleParser（规则解析器）](RuleParser模板文档.md)
   - 功能：解析 Mihomo API 响应数据，提取规则、代理和规则提供者信息
   - 主要方法：parse_rules, parse_proxies, parse_rule_providers, parse_rule_provider_info

4. [RuleMerger（规则合并器）](RuleMerger模板文档.md)
   - 功能：两阶段生成架构的第二阶段，合并中间文件生成最终规则文件
   - 主要方法：merge_from_intermediate, _prepare_workspace, _process_intermediate_directory, _merge_directory_rules

5. [PolicyResolver（策略解析器）](PolicyResolver模板文档.md)
   - 功能：解析 Mihomo 策略链，找出规则的最终出口节点
   - 主要方法：resolve, _resolve_recursive, _standardize_result

6. [MihomoApiClient（Mihomo API 客户端）](MihomoApiClient模板文档.md)
   - 功能：与 Mihomo API 进行高容错通信
   - 主要方法：_request, get_rules, get_proxies, get_rule_providers, get_config, check_connectivity

7. [MosdnsServiceController（Mosdns 服务控制器）](MosdnsServiceController模板文档.md)
   - 功能：执行系统命令重载 Mosdns 服务
   - 主要方法：reload

8. [StateMonitor（状态监控器）](StateMonitor模板文档.md)
   - 功能：监控 Mihomo 状态变化并触发规则生成流程
   - 主要方法：start, _get_state_hash, _debounce_and_trigger, _generate_rules

9. [MihomoConfigParser（Mihomo 配置解析器）](MihomoConfigParser模板文档.md)
   - 功能：解析 Mihomo 本地配置文件以获取 rule-providers 定义
   - 主要方法：parse_config_file, extract_rule_providers

10. [ConfigManager（配置管理器）](ConfigManager模板文档.md)
   - 功能：加载、校验并提供所有应用级别的配置
   - 主要方法：get_mihomo_api_url, get_mihomo_api_timeout, get_api_retry_config 等配置获取方法

## 文档使用说明

每份模板文档都包含以下三个部分：

1. **功能介绍**：简要描述模块的主要功能和作用
2. **工作流程**：详细说明模块的处理流程和实现逻辑
3. **输入输出参数**：列出所有公共方法的参数和返回值，包括类型、必需性、描述等信息

这些文档可以帮助开发者理解系统的各个模块，便于维护、扩展和调试。